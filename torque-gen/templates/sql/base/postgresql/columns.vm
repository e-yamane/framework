#foreach ($col in $table.Columns)
#if($table.database.getTable($col.torqueType))
#set ( $columnPrefix = "$!{columnPrefix}${col.Name}_" )
#set ( $tableNamePrefix = "$!{tableNamePrefix}${table.name}," )
#set ( $cols = $generator.parse("$basepath/columns.vm", "", "table", $table.database.getTable($col.torqueType)))
#set ( $currentTableName = $tableNamePrefix.substring(0, $tableNamePrefix.lastIndexOf(',')))
#set ( $tableNameIndex = $currentTableName.lastIndexOf(',') + 1)
#set ( $currentTableName = $currentTableName.substring($tableNameIndex))
#set ( $table = $table.database.getTable($currentTableName))
#set ( $tableNamePrefix = $tableNamePrefix.replaceAll("${currentTableName},", "") )
#set ( $columnPrefix = $columnPrefix.replaceAll("${col.Name}_$", "") )
    ${cols}#else
#if ($col.TorqueType.indexOf("BOOLEAN") != -1)
#set ( $type = $dbprops.get($col.TorqueType) )
#else
#set ( $type = $dbprops.get($col.Type) )
#end
#if ($col.TorqueType.indexOf("INT") == -1)
#set ( $size = $col.printSize() )
#else
#set ( $size = "" )
#end
#if (($table.IdMethod == "native") && ($col.isPrimaryKey()))
#set ( $default = "DEFAULT nextval('$table.SequenceName')" )
#else
#set ( $default = $col.DefaultSetting )
#end
#set ( $nullString = $strings.select($col.isNotNull(), $dbprops.get("NOTNULL"),"") )
#set ( $entry = "$!{columnPrefix}$col.Name $type $size $default $nullString" )
#if ($col.isAutoIncrement() && $table.IdMethod == "native")
#set ( $autoIncrement = $dbprops.get("AUTOINCREMENT") )
#else
##      #set ( $autoIncrement = " " )
#set ( $autoIncrement = "$type $size $default $nullString" )      
#end    
#set ( $entry = $strings.select($col.isAutoIncrement(), "$!{columnPrefix}$col.Name $autoIncrement", $entry) )
##
## the following works if you want to inline your foreign keys
## if you turn it on, be sure to comment out foreignkey.vm
#if (false)
#if ($col.isForeignKey())
#set ($fk = $col.ForeignKey)
#set ($entry = "$entry REFERENCES $fk.ForeignTableName ($fk.ForeignColumnNames)")
#if ($fk.hasOnUpdate())
#set ($entry = "$entry ON UPDATE $fk.OnUpdate ")
#end
#if ($fk.hasOnDelete())
#set ($entry = "$entry ON DELETE $fk.OnDelete ")
#end
#end
#end
## add a nice comment
#if ($col.isForeignKey())
#set ($fk = $col.ForeignKey)
      -- REFERENCES $fk.ForeignTableName ($fk.ForeignColumnNames)
#end
#set ( $entry = $strings.collapseSpaces("$entry,") )
    $strings.sub($entry," ,",",")
#end
#end
#if($table.baseClass != "BaseObject")
#set($foreignTable = $table.database.getTableByJavaName("$table.baseClass"))
#if($foreignTable)
#if($foreignTable.isSkipSqlOrg())
##外部テーブル展開
$generator.parse("$basepath/columns.vm", "", "table", $foreignTable)#end#end#end
